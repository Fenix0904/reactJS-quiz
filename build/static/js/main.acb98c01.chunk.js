(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,n){},103:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(34),o=n.n(i),u=n(108),s=n(5),c=n(6),l=n(9),p=n(7),d=n(10),m=(n(45),n(47),function(e){var t=["MenuToggle","fa"];return e.isOpen?(t.push("fa-times"),t.push("open")):t.push("fa-bars"),r.a.createElement("i",{className:t.join(" "),onClick:e.onToggle})}),h=(n(49),n(51),function(e){return r.a.createElement("div",{className:"BackDrop",onClick:e.onClick})}),f=n(106),v=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=["Drawer"];this.props.isOpen||e.push("closed");var t=this.props.isOpen?r.a.createElement(h,{onClick:this.props.onClose}):null,n=[{to:"/",label:"Home",exact:!0}];return this.props.isAuthenticated?(n.push({to:"/quiz-creator",label:"Create quiz",exact:!1}),n.push({to:"/logout",label:"Logout",exact:!1})):n.push({to:"/auth",label:"Auth",exact:!1}),r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:e.join(" ")},r.a.createElement("ul",null,this.renderLinks(n))),t)}},{key:"renderLinks",value:function(e){var t=this;return e.map(function(e,n){return r.a.createElement("li",{key:n},r.a.createElement(f.a,{to:e.to,exact:e.exact,activeClassName:"active",onClick:t.props.onClose},e.label))})}}]),t}(r.a.Component),b=n(8),E=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={menu:!1},n.toggleMenu=function(){n.setState({menu:!n.state.menu})},n.onMenuClose=function(){n.setState({menu:!1})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Layout"},r.a.createElement(v,{isOpen:this.state.menu,onClose:this.onMenuClose,isAuthenticated:this.props.isAuthenticated}),r.a.createElement(m,{onToggle:this.toggleMenu,isOpen:this.state.menu}),r.a.createElement("main",null,this.props.children))}}]),t}(r.a.Component),g=Object(b.b)(function(e){return{isAuthenticated:!!e.auth.token}})(E),y=(n(60),n(62),n(64),n(66),function(e){var t="AnswerItem";return e.state&&(t+=" "+e.state),r.a.createElement("li",{className:t,onClick:function(){return e.onAnswerClicked(e.answer.id)}},e.answer.text)}),O=function(e){return r.a.createElement("ul",{className:"AnswersList"},e.answers.map(function(t,n){return r.a.createElement(y,{state:e.state?e.state[t.id]:null,key:n,answer:t,onAnswerClicked:e.onAnswerClicked})}))},w=function(e){return r.a.createElement("div",{className:"ActiveQuiz"},r.a.createElement("p",{className:"Question"},r.a.createElement("span",null,r.a.createElement("strong",null,e.questionNumber,"."),"\xa0",e.question),r.a.createElement("small",null,e.questionNumber," from ",e.quizLength)),r.a.createElement(O,{state:e.state,answers:e.answers,onAnswerClicked:e.onAnswerClicked}))},C=(n(68),n(70),function(e){var t=["Button",e.type];return r.a.createElement("button",{onClick:e.onClick,className:t.join(" "),disabled:e.disabled},e.children)}),j=n(57),z=function(e){var t=Object.keys(e.results).reduce(function(t,n){return"correct"===e.results[n]&&t++,t},0);return r.a.createElement("div",{className:"FinishedQuiz"},r.a.createElement("ul",null,e.quiz.map(function(t,n){var a=["fa","wrong"===e.results[t.id]?"fa-times":"fa-check",e.results[t.id]];return r.a.createElement("li",{key:n},r.a.createElement("strong",null,n+1,"."),"\xa0",t.question,r.a.createElement("i",{className:a.join(" ")}))})),r.a.createElement("p",null,"Correct ",t," from ",e.quiz.length),r.a.createElement("div",null,r.a.createElement(C,{type:"primary",onClick:e.onRetry},"Retry"),r.a.createElement(j.a,{to:"/"},r.a.createElement(C,{type:"correct"},"Go to test list"))))},q=(n(72),function(e){return r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"Loader"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),k=n(18),S=n(13),I=n.n(S),Q=n(16),A=n(22),T=n.n(A),N=T.a.create({baseURL:"https://react-quiz-76a7e.firebaseio.com/"}),L="FETCH_QUIZES_START",_="FETCH_QUIZES_SUCCESS",x="FETCH_QUIZES_ERROR",H="FETCH_QUIZ_SUCCESS",F="QUIZ_SET_STATE",D="FINISH_QUIZ",M="MOVE_TO_NEXT_QUESTION",U="QUIZ_RETRY",R="CREATE_QUIZ_QUESTION",V="RESET_QUIZ_CREATION",Z="AUTH_SUCCESS",B="AUTH_LOGOUT";function P(){return{type:L}}function X(e){return{type:_,payLoad:e}}function G(e){return{type:x,payLoad:e}}function W(e){return{type:H,payLoad:e}}function Y(e){return function(t,n){var a=n().quiz;if(a.answerState){var r=Object.keys(a.answerState)[0];if("correct"===a.answerState[r])return}var i=a.quiz[a.activeQuestion],o=a.results;if(i.rightAnswerId===e){o[i.id]||(o[i.id]="correct"),t(J(Object(k.a)({},e,"correct"),o));var u=window.setTimeout(function(){var e;!function(e){return e.activeQuestion+1===e.quiz.length}(a)?t((e=a.activeQuestion+1,{type:M,payLoad:e})):t({type:D}),window.clearTimeout(u)},1e3)}else o[i.id]="wrong",t(J(Object(k.a)({},e,"wrong"),o))}}function J(e,t){return{type:F,payLoad:{answerState:e,results:t}}}var K=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchQuizById(this.props.match.params.id)}},{key:"componentWillUnmount",value:function(){this.props.retryQuiz()}},{key:"render",value:function(){return r.a.createElement("div",{className:"Quiz"},r.a.createElement("div",{className:"QuizWrapper"},r.a.createElement("h2",null,"Answer the all questions"),this.props.loading||!this.props.quiz?r.a.createElement(q,null):this.props.isFinished?r.a.createElement(z,{results:this.props.results,quiz:this.props.quiz,onRetry:this.props.retryQuiz}):r.a.createElement(w,{answers:this.props.quiz[this.props.activeQuestion].answers,question:this.props.quiz[this.props.activeQuestion].question,onAnswerClicked:this.props.quizAnswerClick,quizLength:this.props.quiz.length,questionNumber:this.props.activeQuestion+1,state:this.props.answerState})))}}]),t}(r.a.Component),$=Object(b.b)(function(e){return{results:e.quiz.results,isFinished:e.quiz.isFinished,activeQuestion:e.quiz.activeQuestion,answerState:e.quiz.answerState,quiz:e.quiz.quiz,loading:e.quiz.loading}},function(e){return{fetchQuizById:function(t){return e((n=t,function(){var e=Object(Q.a)(I.a.mark(function e(t){var a,r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(P()),e.prev=1,e.next=4,N.get("quizes/".concat(n,".json"));case 4:a=e.sent,r=a.data,t(W(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(G(e.t0));case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()));var n},quizAnswerClick:function(t){return e(Y(t))},retryQuiz:function(){return e({type:U})}}})(K),ee=n(110),te=n(55),ne=n(109),ae=n(2);n(95),n(97);function re(e){var t=e.valid,n=e.touched,a=e.shouldValidate;return!t&&a&&n}var ie=function(e){var t=e.type||"text",n=["Input"],a="".concat(t,"--").concat(Math.random()),i=re(e)?r.a.createElement("span",null,e.errorMessage||"You entered invalid data!"):null;return re(e)&&n.push("invalid"),r.a.createElement("div",{className:n.join(" ")},r.a.createElement("label",{htmlFor:a},e.label),r.a.createElement("input",{id:a,type:t,value:e.value,onChange:e.onChange}),i)},oe=n(36),ue=n.n(oe);function se(e,t){return Object(ae.a)({},e,{validation:t,valid:!t,touched:!1,value:""})}function ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return!0;var n=!0;return t.required&&(n=""!==e.trim()&&n),t.email&&(n=ue.a.email(e)),t.minLength&&(n=e.length>=t.minLength&&n),n}function le(e){var t=!0;for(var n in e)e.hasOwnProperty(n)&&(t=e[n].valid&&t);return t}function pe(e){return function(t){setTimeout(function(){t(me())},1e3*e)}}function de(e){return{type:Z,payload:e}}function me(){return localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("expirationDate"),{type:B}}var he=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={isFormValid:!1,formControls:{email:{value:"",type:"email",label:"Email",errorMessage:"You've entered an wrong email",valid:!1,touched:!1,validation:{required:!0,email:!0}},password:{value:"",type:"password",label:"Password",errorMessage:"You've entered wrong password",valid:!1,touched:!1,validation:{required:!0,minLength:6}}}},n.loginHandler=function(){n.props.authenticate(n.state.formControls.email.value,n.state.formControls.password.value,!0)},n.registerHandler=function(){n.props.authenticate(n.state.formControls.email.value,n.state.formControls.password.value,!1)},n.submitHandler=function(e){e.preventDefault()},n.onChangeHandler=function(e,t){var a=Object(ae.a)({},n.state.formControls),r=Object(ae.a)({},a[t]);r.value=e.target.value,r.touched=!0,r.valid=ce(r.value,r.validation),a[t]=r,n.setState({isFormValid:le(a),formControls:a})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Auth"},r.a.createElement("div",null,r.a.createElement("h1",null,"Authorization"),r.a.createElement("form",{className:"AuthForm",onSubmit:this.submitHandler},this.renderInputs(),r.a.createElement(C,{type:"correct",onClick:this.loginHandler,disabled:!this.state.isFormValid},"Login"),r.a.createElement(C,{type:"primary",onClick:this.registerHandler,disabled:!this.state.isFormValid},"Register"))))}},{key:"renderInputs",value:function(){var e=this;return Object.keys(this.state.formControls).map(function(t,n){var a=e.state.formControls[t];return r.a.createElement(ie,{key:t+n,type:a.type,value:a.value,valid:a.valid,touched:a.touched,label:a.label,errorMessage:a.errorMessage,shouldValidate:!!a.validation,onChange:function(n){return e.onChangeHandler(n,t)}})})}}]),t}(r.a.Component),fe=Object(b.b)(null,function(e){return{authenticate:function(t,n,a){return e(function(e,t,n){return function(){var a=Object(Q.a)(I.a.mark(function a(r){var i,o,u,s,c;return I.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i={email:e,password:t,returnSecureToken:!0},o="https://www.googleapis.com/identitytoolkit/v3/relyingparty/signupNewUser?key=AIzaSyAOLW6Oq5DyGRsn8EIKr6IpHlrgTwnNfRs",n&&(o="https://www.googleapis.com/identitytoolkit/v3/relyingparty/verifyPassword?key=AIzaSyAOLW6Oq5DyGRsn8EIKr6IpHlrgTwnNfRs"),a.next=5,T.a.post(o,i);case 5:u=a.sent,s=u.data,c=new Date((new Date).getTime()+1e3*s.expiresIn),localStorage.setItem("token",s.idToken),localStorage.setItem("userId",s.localId),localStorage.setItem("expirationDate",c),r(de(s.idToken)),r(pe(s.expiresIn));case 13:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}(t,n,a))}}})(he),ve=(n(99),n(101),function(e){var t="".concat(e.label,"--").concat(Math.random());return r.a.createElement("div",{className:"Select"},r.a.createElement("label",{htmlFor:t},e.label),r.a.createElement("select",{id:t,value:e.value,onChange:e.onChange},e.options.map(function(e,t){return r.a.createElement("option",{value:e.value,key:e.value+t},e.text)})))});function be(e){return se({label:"Enter answer \u2116 ".concat(e),errorMessage:"Cannot be empty!",id:e},{required:!0})}function Ee(){return{question:se({label:"Enter question",errorMessage:"Question cannot be empty!"},{required:!0}),option1:be(1),option2:be(2),option3:be(3),option4:be(4)}}var ge=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).state={rightAnswerId:1,isFormValid:!1,formControls:Ee()},n.onSubmitHandler=function(e){e.preventDefault()},n.addQuestionHandler=function(e){e.preventDefault();var t=n.state.formControls,a=t.question,r=t.option1,i=t.option2,o=t.option3,u=t.option4,s={question:a.value,id:n.props.quiz.length+1,rightAnswerId:n.state.rightAnswerId,answers:[{text:r.value,id:r.id},{text:i.value,id:i.id},{text:o.value,id:o.id},{text:u.value,id:u.id}]};n.props.createQuizQuestion(s),n.setState({rightAnswerId:1,isFormValid:!1,formControls:Ee()})},n.createQuizHandler=function(e){e.preventDefault(),n.setState({quiz:[],rightAnswerId:1,isFormValid:!1,formControls:Ee()}),n.props.finishCreateQuiz()},n.onChangeHandler=function(e,t){var a=Object(ae.a)({},n.state.formControls),r=Object(ae.a)({},a[t]);r.touched=!0,r.value=e,r.valid=ce(r.value,r.validation),a[t]=r,n.setState({formControls:a,isFormValid:le(a)})},n.onSelectChangeHandler=function(e){n.setState({rightAnswerId:+e.target.value})},n.renderInputControls=function(){return Object.keys(n.state.formControls).map(function(e,t){var a=n.state.formControls[e];return r.a.createElement(r.a.Fragment,{key:e+t},r.a.createElement(ie,{label:a.label,value:a.value,valid:a.valid,shouldValidate:!!a.validation,touched:a.touched,errorMessage:a.errorMessage,onChange:function(t){return n.onChangeHandler(t.target.value,e)}}),0===t?r.a.createElement("hr",null):null)})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=r.a.createElement(ve,{label:"Choose correct answer",value:this.state.rightAnswerId,onChange:this.onSelectChangeHandler,options:[{text:1,value:1},{text:2,value:2},{text:3,value:3},{text:4,value:4}]});return r.a.createElement("div",{className:"QuizCreator"},r.a.createElement("div",null,r.a.createElement("h1",null,"Create Quiz"),r.a.createElement("form",{onSubmit:this.onSubmitHandler},this.renderInputControls(),e,r.a.createElement(C,{type:"primary",onClick:this.addQuestionHandler,disabled:!this.state.isFormValid},"Add question"),r.a.createElement(C,{type:"correct",onClick:this.createQuizHandler,disabled:0===this.props.quiz.length},"Create"))))}}]),t}(r.a.Component),ye=Object(b.b)(function(e){return{quiz:e.quizCreator.quiz}},function(e){return{createQuizQuestion:function(t){return e(function(e){return{type:R,payLoad:e}}(t))},finishCreateQuiz:function(){return e(function(){var e=Object(Q.a)(I.a.mark(function e(t,n){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("/quizes.json",n().quizCreator.quiz);case 2:t({type:V});case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())}}})(ge),Oe=(n(103),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchQuizes()}},{key:"renderQuizes",value:function(){return this.props.quizes.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(f.a,{to:"/quiz/"+e.id},e.name))})}},{key:"render",value:function(){var e=this.props.loading&&0!==this.props.quizes.length?r.a.createElement(q,null):this.renderQuizes();return r.a.createElement("div",{className:"QuizList"},r.a.createElement("div",null,r.a.createElement("h1",null,"Quiz List"),r.a.createElement("ul",null,e)))}}]),t}(r.a.Component)),we=Object(b.b)(function(e){return{quizes:e.quiz.quizes,loading:e.quiz.loading}},function(e){return{fetchQuizes:function(){return e(function(){var e=Object(Q.a)(I.a.mark(function e(t){var n,a;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(P()),e.prev=1,e.next=4,N.get("quizes.json");case 4:n=e.sent,a=[],Object.keys(n.data).forEach(function(e,t){a.push({id:e,name:"Test \u2116 ".concat(t+1)})}),t(X(a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(G(e.t0));case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t){return e.apply(this,arguments)}}())}}})(Oe),Ce=n(107),je=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.logout()}},{key:"render",value:function(){return r.a.createElement(Ce.a,{to:"/"})}}]),t}(r.a.Component),ze=Object(b.b)(null,function(e){return{logout:function(){return e(me())}}})(je),qe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.autoLogin()}},{key:"render",value:function(){var e=r.a.createElement(ee.a,null,r.a.createElement(te.a,{path:"/auth",component:fe}),r.a.createElement(te.a,{path:"/quiz/:id",component:$}),r.a.createElement(te.a,{path:"/",component:we}));return this.props.isAuthenticated&&(e=r.a.createElement(ee.a,null,r.a.createElement(te.a,{path:"/quiz-creator",component:ye}),r.a.createElement(te.a,{path:"/quiz/:id",component:$}),r.a.createElement(te.a,{path:"/logout",component:ze}),r.a.createElement(te.a,{path:"/",component:we}))),r.a.createElement(g,null,e)}}]),t}(r.a.Component),ke=Object(ne.a)(Object(b.b)(function(e){return{isAuthenticated:!!e.auth.token}},function(e){return{autoLogin:function(){return e(function(e){var t=localStorage.getItem("token");if(t){var n=new Date(localStorage.getItem("expirationDate"));n<=new Date?e(me()):(e(de(t)),e(pe((n.getTime()-(new Date).getTime())/1e3)))}else e(me())})}}})(qe)),Se=n(14),Ie={quizes:[],loading:!1,error:null,results:{},isFinished:!1,activeQuestion:0,answerState:null,quiz:null},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(ae.a)({},e,{loading:!0});case _:return Object(ae.a)({},e,{loading:!1,quizes:t.payLoad});case x:return Object(ae.a)({},e,{loading:!1,error:t.payLoad});case H:return Object(ae.a)({},e,{loading:!1,quiz:t.payLoad});case F:return Object(ae.a)({},e,{answerState:t.payLoad.answerState,results:t.payLoad.results});case D:return Object(ae.a)({},e,{isFinished:!0});case M:return Object(ae.a)({},e,{answerState:null,activeQuestion:t.payLoad});case U:return Object(ae.a)({},e,{activeQuestion:0,answerState:null,isFinished:!1,results:{}});default:return e}},Ae=n(39),Te={quiz:[]};var Ne={token:null};var Le=Object(Se.c)({quiz:Qe,quizCreator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(ae.a)({},e,{quiz:[].concat(Object(Ae.a)(e.quiz),[t.payLoad])});case V:return Object(ae.a)({},e,{quiz:[]});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return Object(ae.a)({},e,{token:t.payload});case B:return Object(ae.a)({},e,{token:null});default:return e}}}),_e=n(38),xe="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):Se.d,He=Object(Se.e)(Le,xe(Object(Se.a)(_e.a)));o.a.render(r.a.createElement(b.a,{store:He},r.a.createElement(u.a,null,r.a.createElement(ke,null))),document.getElementById("root"))},40:function(e,t,n){e.exports=n(105)},45:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){},68:function(e,t,n){},70:function(e,t,n){},72:function(e,t,n){},95:function(e,t,n){},97:function(e,t,n){},99:function(e,t,n){}},[[40,2,1]]]);
//# sourceMappingURL=main.acb98c01.chunk.js.map